# Asynchronous JavaScript: Promises, Async/Await, and AJAX

## Running Promises in Parallel

`Promise.all()` : this function takes in an array of promises, and it will return a new promise, which will then run all the promises in the array at the same time. (kind of a helper function on this promise constructor. - static method, combinator function)

So whenever you have a situation in which you need to do multiple asynchronous operations at the same time, and operations that donâ€™t depend on one another, then you should always run them in parallel.

```jsx
const getJson = function (url, errorMsg = "Something went wrong") {
	return fetch(url).then((response) => {
		if (!response.ok) {
			throw new Error(`${errorMsg} (${response.status})`);
		}
		return response.json();
	});
};

const get3Countries = async function (c1, c2, c3) {
	try {
		// const [data1] = await getJson(`https://restcountries.com/v3.1/name/${c1}`);
		// const [data2] = await getJson(`https://restcountries.com/v3.1/name/${c2}`);
		// const [data3] = await getJson(`https://restcountries.com/v3.1/name/${c3}`);

		const data = await Promise.all([
			getJson(`https://restcountries.com/v3.1/name/${c1}`),
			getJson(`https://restcountries.com/v3.1/name/${c2}`),
			getJson(`https://restcountries.com/v3.1/name/${c3}`),
		]);
		// console.log([data1.capital, data2.capital, data3.capital]);
		// console.log(data);
		console.log(data.map((d) => d[0].capital));
	} catch (err) {
		console.error(err);
	}
};

get3Countries("portugal", "canada", "singapore");
```

---

[<PREV](./cjs221124.md) || [NEXT>](./cjs221126.md)
